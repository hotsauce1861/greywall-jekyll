
[IAP ST官方资料汇总]()

STM32升级的三种方式：
- IAP
- ICP
- ISP

通常本文需要实现STM32的`Bootloader`包括两个部分，`IAP`和文件传输，其中文件传基于`ymodem`协议通过串口进行传输，这里参考了`ST`官方的`DEMO`，做了部分修改，类似`u-boot`增加了延时启动的功能，最终可以实现想要的效果。
![](/img/20191230/bootloader.png)



```c
#define ApplicationAddress    0x8003000
```

![](/img/20191230/IROM1.png)
![](/img/20191230/FLASH.png)
![](/img/20191230/srtfile.png.png)

参考`ARMCC`的链接脚本编写方法
```c
; *************************************************************
; *** Scatter-Loading Description File generated by uVision ***
; *************************************************************

LR_IROM1 0x08000000 0x00002FFF  {    ; load region size_region
  ER_IROM1 0x08000000 0x00002FFF  {  ; load address = execution address
    *.o (RESET, +First)
    *(InRoot$$Sections)
    .ANY (+RO)
    .ANY (+XO)
  }
  RW_IRAM1 0x20000000 0x00005000  {  ; RW data
    .ANY (+RW +ZI)
  }
}
```

